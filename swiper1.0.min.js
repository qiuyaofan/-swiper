$(function(b){var a={init:function(s){var f={before:false,callback:false,activeIndex:0};var d=b.extend({},f,s);var n=b(this);var p=b(".slide-item");var q;var o;var h;var r=p.length-1;var g=n.height();var l=0;var k=b('<div class="slide-page"><span></span><span></span><span></span><span></span></div>');if(b("body").find(".slide-page").length<=0){b("body").append(k)}$pageList=b(".slide-page>span");n.data("index",d.activeIndex);p.eq(d.activeIndex).addClass("current");$pageList.eq(d.activeIndex).addClass("current");j(0);c(n,0);document.body.addEventListener("touchmove",function(t){t.preventDefault()},false);$pageList.on("touchstart click",function(u){var t=b(u.target).hasClass("current")?false:true;var v=$pageList.index(b(this));e(t,v)});n.on({touchstart:function(u){i(u);var t=n.data("index");q=u.touches[0].pageY;j(0)},touchmove:function(t){i(t);var u;o=t.touches[0].pageY;h=o-q;u=Math.round(h+l);c(n,u)},touchend:function(u){var v=n.data("index");var t;j(300);if(h<0){v+1>r?false:t=true;v=(v+1)>r?r:v+1}else{if(h>0){v-1<=0?false:t=true;v=(v-1)<=0?0:v-1}}e(t,v)}});function e(t,u){p.removeClass("current").eq(u).addClass("current");$pageList.removeClass("current").eq(u).addClass("current");if(t&&d.before){d.before.call(this,u)}c(n,-u*g);if(t&&d.callback){d.callback.call(this,u)}n.data("index",u);l=m(n)}function i(t){if(!t.touches){t.touches=t.originalEvent.touches}}function c(t,u){t.css({"-webkit-transform":"translateY("+u+"px)",transform:"translateY("+u+"px)"})}function m(v){var u=/\.*translateY\((.*)px\)/i;var t;if(v[0].style.WebkitTransform){t=parseInt(u.exec(v[0].style.WebkitTransform)[1])}else{if(v[0].style.transform){t=parseInt(u.exec(v[0].style.transforms)[1])}}return t}function j(t){n.css({"-webkit-transition-duration":t+"ms","transition-duration":t+"ms"})}}};b.fn.wapSlide=function(){var c=arguments[0];if(a[c]){c=a[c];arguments=Array.prototype.slice.call(arguments,1)}else{if(typeof(c)=="object"||!c){c=a.init}else{b.error("Method "+c+" does not exist on jQuery.layer Plugin");return this}}return c.apply(this,arguments)}}(jQuery));
